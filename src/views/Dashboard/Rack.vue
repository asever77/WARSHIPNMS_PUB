<template>
  <div class="rack-wrap" ref="rootEl">
    <div class="rack-item">
      <h2 class="table-title-box">무선통신기시스템</h2>
      <div class="rack-item-row">
        <div class="rack-item-col">
          <div class="rack-item-col--item" data-col="1">
            <img src="@/assets/images/network/dummy/Slice1.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="1">
            <img src="@/assets/images/network/dummy/Slice2.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="1">
            <img src="@/assets/images/network/dummy/Slice2.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="4">
            <img src="@/assets/images/network/dummy/Slice2.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="2">
            <img src="@/assets/images/network/dummy/Slice3.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="3">
            <img src="@/assets/images/network/dummy/Slice3.png" alt="">
          </div>

          <div class="rack-item-col--item" data-col="4"></div>

          <div class="rack-item-col--item" data-col="4">
            <img src="@/assets/images/network/dummy/Slice4.png" alt="">
          </div>

          <div class="rack-item-col--item" data-col="1"></div>

          <div class="rack-item-col--item" data-col="2">
            <img src="@/assets/images/network/dummy/Slice5.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="3">
            <img src="@/assets/images/network/dummy/Slice5.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="10">
            <img src="@/assets/images/network/dummy/Slice5.png" alt="">
          </div>
        </div>
        <div class="rack-item-col">
          <div class="rack-item-col--item" data-col="1">
            <img src="@/assets/images/network/dummy/Slice1.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="3">
            <img src="@/assets/images/network/dummy/Slice6.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="1">
            <img src="@/assets/images/network/dummy/Slice1.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="2"></div>
          <div class="rack-item-col--item" data-col="3">
            <img src="@/assets/images/network/dummy/Slice7.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="8">
            <img src="@/assets/images/network/dummy/Slice8.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="1">
            <img src="@/assets/images/network/dummy/Slice1.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="1">
            <img src="@/assets/images/network/dummy/Slice1.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="1"></div>
          <div class="rack-item-col--item" data-col="1">
            <img src="@/assets/images/network/dummy/Slice1.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="2">
            <img src="@/assets/images/network/dummy/Slice9.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="1"></div>
          <div class="rack-item-col--item" data-col="4">
            <img src="@/assets/images/network/dummy/Slice10.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="1"></div>
          <div class="rack-item-col--item" data-col="1">
            <img src="@/assets/images/network/dummy/Slice11.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="1">
            <img src="@/assets/images/network/dummy/Slice1.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="3">
            <img src="@/assets/images/network/dummy/Slice13.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="1">
            <img src="@/assets/images/network/dummy/Slice1.png" alt="">
          </div>
        </div>
      </div>
    </div>

    <div class="rack-item">
      <h2 class="table-title-box">무선통신운용콘솔</h2>
      <div class="rack-item-row">
        <div class="rack-item-col">
          <div class="rack-item-col--item" data-col="1">
            <img src="@/assets/images/network/dummy/Slice12.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="3">
            <img src="@/assets/images/network/dummy/Slice14.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="3" data-state="warn" v-bs-tooltip="careText" data-bs-placement="top">
            <img src="@/assets/images/network/dummy/Slice14.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="3">
            <img src="@/assets/images/network/dummy/Slice14.png" alt="">
          </div>

          <div class="rack-item-col--item" data-col="8">
            <img src="@/assets/images/network/dummy/Slice8.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="1">
            <img src="@/assets/images/network/dummy/Slice1.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="1">
            <img src="@/assets/images/network/dummy/Slice12.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="1"></div>
          <div class="rack-item-col--item" data-col="1">
            <img src="@/assets/images/network/dummy/Slice12.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="2">
            <img src="@/assets/images/network/dummy/Slice18.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="3">
            <img src="@/assets/images/network/dummy/Slice19.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="3">
            <img src="@/assets/images/network/dummy/Slice19.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="1">
            <img src="@/assets/images/network/dummy/Slice12.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="2">
            <img src="@/assets/images/network/dummy/Slice21.png" alt="">
          </div>
           <div class="rack-item-col--item" data-col="2">
            <img src="@/assets/images/network/dummy/Slice21.png" alt="">
          </div>
           <div class="rack-item-col--item" data-col="1">
            <img src="@/assets/images/network/dummy/Slice1.png" alt="">
          </div>
        </div>
        <div class="rack-item-col">
          <div class="rack-item-col--item" data-col="1">
            <img src="@/assets/images/network/dummy/Slice1.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="3">
            <img src="@/assets/images/network/dummy/Slice15.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="4">
            <img src="@/assets/images/network/dummy/Slice16.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="1">
            <img src="@/assets/images/network/dummy/Slice1.png" alt="">
          </div>

          <div class="rack-item-col--item" data-col="6">
            <img src="@/assets/images/network/dummy/Slice17.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="1"></div>

          <div class="rack-item-col--item" data-col="4">
            <img src="@/assets/images/network/dummy/Slice18.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="1"></div>

          <div class="rack-item-col--item" data-col="1">
            <img src="@/assets/images/network/dummy/Slice1.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="2">
            <img src="@/assets/images/network/dummy/Slice1.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="1">
            <img src="@/assets/images/network/dummy/Slice30.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="3">
            <img src="@/assets/images/network/dummy/Slice1.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="3"></div>

          <div class="rack-item-col--item" data-col="2">
            <img src="@/assets/images/network/dummy/Slice22.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="2">
            <img src="@/assets/images/network/dummy/Slice23.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="1">
            <img src="@/assets/images/network/dummy/Slice1.png" alt="">
          </div>
        </div>
        <div class="rack-item-col">
          <div class="rack-item-col--item" data-col="1">
            <img src="@/assets/images/network/dummy/Slice1.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="2">
            <img src="@/assets/images/network/dummy/Slice2.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="2">
            <img src="@/assets/images/network/dummy/Slice2.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="2">
            <img src="@/assets/images/network/dummy/Slice2.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="4">
            <img src="@/assets/images/network/dummy/Slice2.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="4">
            <img src="@/assets/images/network/dummy/Slice25.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="4">
            <img src="@/assets/images/network/dummy/Slice24.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="3"></div>

          <div class="rack-item-col--item" data-col="1">
            <img src="@/assets/images/network/dummy/Slice12.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="1">
            <img src="@/assets/images/network/dummy/Slice11.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="1"></div>

          <div class="rack-item-col--item" data-col="2">
            <img src="@/assets/images/network/dummy/Slice21.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="8">
            <img src="@/assets/images/network/dummy/Slice26.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="1">
            <img src="@/assets/images/network/dummy/Slice1.png" alt="">
          </div>
        </div>
      </div>
    </div>

    <div class="rack-item">
      <h2 class="table-title-box">비상통신시스템</h2>
      <div class="rack-item-row">
        <div class="rack-item-col">
          <div class="rack-item-col--item" data-col="1">
            <img src="@/assets/images/network/dummy/Slice1.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="1">
            <img src="@/assets/images/network/dummy/Slice1.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="1">
            <img src="@/assets/images/network/dummy/Slice1.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="3"></div>

          <div class="rack-item-col--item" data-col="4">
            <img src="@/assets/images/network/dummy/Slice24.png" alt="">
          </div>
           <div class="rack-item-col--item" data-col="1">
            <img src="@/assets/images/network/dummy/Slice2.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="3">
            <img src="@/assets/images/network/dummy/Slice28.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="1"></div>

          <div class="rack-item-col--item" data-col="4">
            <img src="@/assets/images/network/dummy/Slice24.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="5"></div>

          <div class="rack-item-col--item" data-col="2">
            <img src="@/assets/images/network/dummy/Slice33.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="9">
            <img src="@/assets/images/network/dummy/Slice27.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="1">
            <img src="@/assets/images/network/dummy/Slice1.png" alt="">
          </div>
        </div>
        <div class="rack-item-col">
          <div class="rack-item-col--item" data-col="1">
            <img src="@/assets/images/network/dummy/Slice1.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="2">
            <img src="@/assets/images/network/dummy/Slice1.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="3">
            <img src="@/assets/images/network/dummy/Slice29.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="1">
            <img src="@/assets/images/network/dummy/Slice30.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="1">
            <img src="@/assets/images/network/dummy/Slice1.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="1"></div>
          <div class="rack-item-col--item" data-col="3">
            <img src="@/assets/images/network/dummy/Slice31.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="3"></div>
          <div class="rack-item-col--item" data-col="4">
            <img src="@/assets/images/network/dummy/Slice24.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="4">
            <img src="@/assets/images/network/dummy/Slice32.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="1"></div>
           <div class="rack-item-col--item" data-col="3">
            <img src="@/assets/images/network/dummy/Slice31.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="3"></div>
          <div class="rack-item-col--item" data-col="1">
            <img src="@/assets/images/network/dummy/Slice1.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="2">
            <img src="@/assets/images/network/dummy/Slice1.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="2">
            <img src="@/assets/images/network/dummy/Slice1.png" alt="">
          </div>
          <div class="rack-item-col--item" data-col="1">
            <img src="@/assets/images/network/dummy/Slice1.png" alt="">
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, onMounted } from "vue";
import G from "@/config/global.js";

const ko = {
  "title": "랙 내용"
};

const en = {
  "title": "랙 내용"
};

const lang = ref({});
const rootEl = ref(null);
const careText = (G.lang === 'ko') ? '점검 필요' : 'Care required';

onMounted(() => {
  lang.value = (G.lang === "ko") ? ko : en;
  const container = rootEl.value;
  if (!container) return;

  const imgs = container.querySelectorAll('img');
  imgs.forEach((img) => {
    if (!img.getAttribute('title')) {
      const alt = img.getAttribute('alt');
      let title = (alt && alt.trim() !== '') ? alt.trim() : '';
      if (!title) {
        try {
          const srcAttr = img.getAttribute('src') || '';
          const url = new URL(srcAttr, window.location.origin);
          const path = url.pathname || srcAttr;
          title = (path.split('/')?.pop()) || '';
        } catch (e) {
          const srcAttr = img.getAttribute('src') || '';
          title = (srcAttr.split('/')?.pop()) || '';
        }
      }
      if (title) img.setAttribute('title', title);
    }

    try {
      // Initialize Bootstrap Tooltip if available
      if (window.bootstrap && window.bootstrap.Tooltip) {
        // Assign role for accessibility when tooltip is present
        if (!img.getAttribute('role')) img.setAttribute('role', 'img');
        new window.bootstrap.Tooltip(img);
      }
    } catch (_) {
      // No-op if bootstrap isn't present
    }
  });

  // no-op: care-state tooltips handled via v-bs-tooltip directive
});
</script>
